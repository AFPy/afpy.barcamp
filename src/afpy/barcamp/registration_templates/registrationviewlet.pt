<div id="registration">
  <a href="@@registrationpage"
     tal:condition="python: not viewlet.registered and not viewlet.loggedin"
     i18n:translate="">
    I would like to attend!
  </a>

<tal:block condition="viewlet/loggedin">
    You are
    <span id="username"
          tal:content="viewlet/nick">
        username
    </span>
    <form method="post"
          tal:condition="not:viewlet/registered"
          action="@@registration?register">
      <input type="submit"
             name="register"
             value="add me to this session" />
    </form>

    <form method="post"
          tal:condition="viewlet/registered"
          action="@@registration?unregister">
      <input type="submit"
             name="unregister"
             value="remove me from this session" />
    </form>
    <a href="@@registrationpage?new">
        change user
    </a>
</tal:block>

</div>
